# Generated by Django 4.2.2 on 2023-08-20 01:33

from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("main", "0024_alter_event_options_event_group_by_alter_event_end_and_more"),
    ]

    operations = [
        migrations.RemoveIndex(
            model_name="event",
            name="main_event_group_b_3b75c6_idx",
        ),
        migrations.AlterField(
            model_name="event",
            name="group_by",
            field=models.CharField(
                db_index=True,
                help_text="A unique identifier for this event, used to group images into events. This allows images to be prepended or appended to an existing event. The default value is the day the event started, in the format YYYY-MM-DD. However images could also be grouped by camera settings, image dimensions, hour of day, or a random sampler.",
                max_length=255,
            ),
        ),
        migrations.AlterField(
            model_name="event",
            name="start",
            field=models.DateTimeField(db_index=True, help_text="The timestamp of the first image in the event."),
        ),
        migrations.AlterField(
            model_name="sourceimage",
            name="timestamp",
            field=models.DateTimeField(blank=True, db_index=True, null=True),
        ),
        migrations.AddIndex(
            model_name="event",
            index=models.Index(fields=["group_by"], name="main_event_group_b_6ce666_idx"),
        ),
        migrations.AddIndex(
            model_name="event",
            index=models.Index(fields=["start"], name="main_event_start_ad5015_idx"),
        ),
        migrations.AddIndex(
            model_name="sourceimage",
            index=models.Index(fields=["timestamp"], name="main_source_timesta_979028_idx"),
        ),
        migrations.AddIndex(
            model_name="sourceimage",
            index=models.Index(fields=["event"], name="main_source_event_i_6ca966_idx"),
        ),
        migrations.AddConstraint(
            model_name="event",
            constraint=models.UniqueConstraint(fields=("deployment", "group_by"), name="unique_event"),
        ),
    ]
